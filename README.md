# DevKit - Git åˆ†æ”¯åˆå¹¶å·¥å…·

ä¸€ä¸ªå¼ºå¤§çš„ CLI å·¥å…·ï¼Œç”¨äºç®€åŒ– Git åˆ†æ”¯åˆå¹¶å·¥ä½œæµã€‚DevKit è‡ªåŠ¨åŒ–äº†å°†å½“å‰å¼€å‘åˆ†æ”¯åˆå¹¶åˆ°ç›®æ ‡é›†æˆåˆ†æ”¯çš„è¿‡ç¨‹ï¼Œå…·å¤‡é€‚å½“çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„è¾“å‡ºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **è‡ªåŠ¨åŒ–åˆå¹¶å·¥ä½œæµ**ï¼šé€šè¿‡å•ä¸ªå‘½ä»¤æ— ç¼åˆå¹¶åˆ†æ”¯
- ğŸ” **é¢„æ£€æŸ¥**ï¼šåœ¨æ“ä½œå‰éªŒè¯ Git ä»“åº“çŠ¶æ€
- ğŸ¯ **æ™ºèƒ½åˆ†æ”¯æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹å½“å‰åˆ†æ”¯å’Œç›®æ ‡åˆ†æ”¯
- ğŸ›¡ï¸ **å†²çªæ£€æµ‹**ï¼šä¼˜é›…åœ°å¤„ç†åˆå¹¶å†²çªï¼Œå¹¶æä¾›æ¸…æ™°çš„æŒ‡å¯¼
- ğŸ¨ **ç¾è§‚è¾“å‡º**ï¼šå½©è‰²ã€ä¿¡æ¯ä¸°å¯Œçš„ CLI ç•Œé¢ï¼Œå¸¦æœ‰è¿›åº¦æŒ‡ç¤ºå™¨
- ğŸ”„ **å®‰å…¨æ“ä½œ**ï¼šå®Œæˆåå§‹ç»ˆè¿”å›åˆ°åŸå§‹åˆ†æ”¯
- ğŸ§ª **è¯•è¿è¡Œæ¨¡å¼**ï¼šé¢„è§ˆæ“ä½œè€Œä¸è¿›è¡Œå®é™…æ›´æ”¹
- âš¡ **å¼ºåˆ¶æ¨¡å¼**ï¼šè·³è¿‡ç¡®è®¤ï¼Œé€‚ç”¨äºè‡ªåŠ¨åŒ–å·¥ä½œæµ

## å®‰è£…

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
npm install -g devkit
```

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd devkit

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# é“¾æ¥ç”¨äºæœ¬åœ°å¼€å‘
npm link
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# å°†å½“å‰åˆ†æ”¯åˆå¹¶åˆ° staging
devkit merge staging

# å°†å½“å‰åˆ†æ”¯åˆå¹¶åˆ° main
devkit merge main
```

### é«˜çº§é€‰é¡¹

```bash
# é¢„è§ˆåˆå¹¶æ“ä½œï¼ˆè¯•è¿è¡Œï¼‰
devkit merge staging --dry-run

# å¼ºåˆ¶åˆå¹¶ï¼Œæ— éœ€ç¡®è®¤
devkit merge staging --force

# æ˜¾ç¤ºå¸®åŠ©
devkit --help

# æ˜¾ç¤ºç‰ˆæœ¬
devkit --version
```

## å·¥ä½œåŸç†

å½“æ‚¨è¿è¡Œ `devkit merge <target-branch>` æ—¶ï¼Œè¯¥å·¥å…·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **é¢„æ£€æŸ¥**ï¼š
   - éªŒè¯æ‚¨æ˜¯å¦åœ¨ Git ä»“åº“ä¸­
   - æ£€æŸ¥å·¥ä½œç›®å½•æ˜¯å¦å¹²å‡€
   - ä» origin è·å–æœ€æ–°æ›´æ”¹
   - éªŒè¯ç›®æ ‡åˆ†æ”¯æ˜¯å¦å­˜åœ¨

2. **æ“ä½œè§„åˆ’**ï¼š
   - å‘æ‚¨å±•ç¤ºå°†è¦æ‰§è¡Œçš„å…·ä½“æ“ä½œ
   - æ˜¾ç¤ºæºåˆ†æ”¯å’Œç›®æ ‡åˆ†æ”¯
   - è¯·æ±‚ç¡®è®¤ï¼ˆé™¤éä½¿ç”¨ `--force`ï¼‰

3. **åˆå¹¶å·¥ä½œæµ**ï¼š
   - åˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯
   - æ‹‰å–ç›®æ ‡åˆ†æ”¯çš„æœ€æ–°æ›´æ”¹
   - å°†æºåˆ†æ”¯åˆå¹¶åˆ°ç›®æ ‡åˆ†æ”¯
   - å°†æ›´æ–°åçš„ç›®æ ‡åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹
   - åˆ‡æ¢å›åŸå§‹åˆ†æ”¯

4. **é”™è¯¯å¤„ç†**ï¼š
   - æ£€æµ‹åˆå¹¶å†²çªå¹¶æä¾›æ¸…æ™°çš„æŒ‡å¯¼
   - åœ¨å‡ºé”™æ—¶å®‰å…¨åœ°è¿”å›åˆ°åŸå§‹åˆ†æ”¯
   - æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯å’Œæ¢å¤æ­¥éª¤

## ç¤ºä¾‹

### æˆåŠŸåˆå¹¶

```bash
$ devkit merge staging

ğŸ” é¢„æ£€æŸ¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ æ£€æµ‹åˆ° Git ä»“åº“
âœ“ å·¥ä½œç›®å½•å¹²å‡€
âœ“ ä» origin è·å–äº†æœ€æ–°æ›´æ”¹
âœ“ ç›®æ ‡åˆ†æ”¯ "staging" å­˜åœ¨

ğŸ“‹ æ“ä½œè®¡åˆ’
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â†’ 1. ä» "feature/new-feature" åˆ‡æ¢åˆ° "staging"
â†’ 2. æ‹‰å– "staging" çš„æœ€æ–°æ›´æ”¹
â†’ 3. å°† "feature/new-feature" åˆå¹¶åˆ° "staging"
â†’ 4. å°† "staging" æ¨é€åˆ°è¿œç¨‹
â†’ 5. åˆ‡æ¢å› "feature/new-feature"

â„¹ æºåˆ†æ”¯: "feature/new-feature"
â„¹ ç›®æ ‡åˆ†æ”¯: "staging"

? æ‚¨æƒ³è¦ç»§ç»­æ‰§è¡Œåˆå¹¶æ“ä½œå—ï¼Ÿ æ˜¯

ğŸš€ æ‰§è¡Œåˆå¹¶å·¥ä½œæµ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ åˆ‡æ¢åˆ° "staging"
âœ“ æ‹‰å–äº† "staging" çš„æœ€æ–°æ›´æ”¹
âœ“ å°† "feature/new-feature" åˆå¹¶åˆ° "staging"
âœ“ å°† "staging" æ¨é€åˆ°è¿œç¨‹
âœ“ åˆ‡æ¢å› "feature/new-feature"

âœ“ ğŸ‰ æˆåŠŸå°† "feature/new-feature" åˆå¹¶åˆ° "staging"ï¼
â„¹ æ›´æ”¹å·²æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚
```

### è¯•è¿è¡Œæ¨¡å¼

```bash
$ devkit merge staging --dry-run

ğŸ” é¢„æ£€æŸ¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ æ£€æµ‹åˆ° Git ä»“åº“
âœ“ å·¥ä½œç›®å½•å¹²å‡€
âœ“ ä» origin è·å–äº†æœ€æ–°æ›´æ”¹
âœ“ ç›®æ ‡åˆ†æ”¯ "staging" å­˜åœ¨

ğŸ“‹ æ“ä½œè®¡åˆ’ï¼ˆè¯•è¿è¡Œï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â†’ 1. ä» "feature/new-feature" åˆ‡æ¢åˆ° "staging"
â†’ 2. æ‹‰å– "staging" çš„æœ€æ–°æ›´æ”¹
â†’ 3. å°† "feature/new-feature" åˆå¹¶åˆ° "staging"
â†’ 4. å°† "staging" æ¨é€åˆ°è¿œç¨‹
â†’ 5. åˆ‡æ¢å› "feature/new-feature"

â„¹ æºåˆ†æ”¯: "feature/new-feature"
â„¹ ç›®æ ‡åˆ†æ”¯: "staging"

â„¹ è¯•è¿è¡Œå®Œæˆã€‚æ²¡æœ‰è¿›è¡Œå®é™…æ›´æ”¹ã€‚
```

## é”™è¯¯å¤„ç†

DevKit ä¼˜é›…åœ°å¤„ç†å„ç§é”™è¯¯åœºæ™¯ï¼š

### æœªæäº¤çš„æ›´æ”¹
```bash
âœ— å·¥ä½œç›®å½•ä¸å¹²å‡€
âœ— æ‚¨æœ‰æœªæäº¤çš„æ›´æ”¹ã€‚è¯·åœ¨åˆå¹¶å‰æäº¤æˆ–æš‚å­˜å®ƒä»¬ã€‚
```

### åˆå¹¶å†²çª
```bash
âœ— åˆå¹¶å¤±è´¥ï¼šæ£€æµ‹åˆ°åˆå¹¶å†²çª
âœ— åœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­æ£€æµ‹åˆ°åˆå¹¶å†²çªï¼š
âœ—   - src/components/Button.tsx
âœ—   - src/utils/helpers.ts
â„¹ è¯·æ‰‹åŠ¨è§£å†³å†²çªå¹¶è¿è¡Œï¼š
â„¹ $ git add .
â„¹ $ git commit
â„¹ $ git push origin staging
```

### åˆ†æ”¯æœªæ‰¾åˆ°
```bash
âœ— ç›®æ ‡åˆ†æ”¯ "nonexistent" åœ¨æœ¬åœ°æˆ–è¿œç¨‹éƒ½ä¸å­˜åœ¨
```

## é…ç½®

DevKit å¯ä»¥åœ¨ä»»ä½• Git ä»“åº“ä¸­å¼€ç®±å³ç”¨ã€‚æ— éœ€é¢å¤–é…ç½®ã€‚

## ç³»ç»Ÿè¦æ±‚

- Node.js >= 14.0.0
- å·²å®‰è£…å¹¶é…ç½® Git
- è®¿é—®å…·æœ‰è¿œç¨‹ origin çš„ Git ä»“åº“

## å¼€å‘

### é¡¹ç›®ç»“æ„

```
devkit/
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts         # CLI å…¥å£ç‚¹
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â””â”€â”€ merge.ts     # åˆå¹¶å‘½ä»¤å®ç°
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ git.ts       # Git æ“ä½œ
â”‚   â”‚   â””â”€â”€ logger.ts    # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ index.ts     # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ devkit.js        # å¯æ‰§è¡Œæ–‡ä»¶
â””â”€â”€ README.md
```

### æ„å»º

```bash
# å®‰è£…ä¾èµ–
npm install

# å°† TypeScript æ„å»ºä¸º JavaScript
npm run build

# ä»¥å¼€å‘æ¨¡å¼è¿è¡Œ
npm run dev
```
